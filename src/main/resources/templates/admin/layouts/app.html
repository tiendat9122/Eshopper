<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">

    <head th:fragment="header(title, content, description)">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

        <title th:text="${title}"></title>

        <meta name="description"
            content="OneUI - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
        <meta name="author" content="pixelcave">
        <meta name="robots" content="noindex, nofollow">

        <!-- Open Graph Meta -->
        <meta property="og:title" content="OneUI - Bootstrap 4 Admin Template &amp; UI Framework">
        <meta property="og:site_name" content="OneUI">
        <meta property="og:description"
            content="OneUI - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
        <meta property="og:type" content="website">
        <meta property="og:url" content="">
        <meta property="og:image" content="">

        <!-- Icons -->
        <!-- The following icons can be replaced with your own, they are used b y desktop and mobile browsers -->
        <link rel="shortcut icon" href="/content/admin/assets/media/favicons/favicon.png">
        <link rel="icon" type="image/png" sizes="192x192"
            href="/content/admin/assets/media/favicons/favicon-192x192.png">
        <link rel="apple-touch-icon" sizes="180x180"
            href="/content/admin/assets/media/favicons/apple-touch-icon-180x180.png">
        <!-- END Icons -->

        <!-- Stylesheets -->
        <!-- Page JS Plugins CSS -->
        <link rel="stylesheet" href="/content/admin/assets/js/plugins/datatables/dataTables.bootstrap4.css">
        <link rel="stylesheet"
            href="/content/admin/assets/js/plugins/datatables/buttons-bs4/buttons.bootstrap4.min.css">

        <!-- Fonts and OneUI framework -->
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
        <link rel="stylesheet" id="css-main" href="/content/admin/assets/css/oneui.min.css">
        <script src="/content/admin/js/mainlib.js"></script>
    </head>

    <body>
        <div id="page-container"
            class="sidebar-o sidebar-dark enable-page-overlay side-scroll page-header-fixed main-content-narrow">
            <!-- Side Overlay-->
            <aside th:replace="admin/layouts/aside.html :: aside"></aside>
            <!-- END Side Overlay -->

            <!-- Sidebar -->
            <nav th:replace="admin/layouts/nav.html :: nav"></nav>
            <!-- END Sidebar -->

            <!-- Header -->
            <header th:replace="admin/layouts/header.html :: header "></header>
            <!-- END Header -->

            <!-- Main Container -->
            <main th:replace="~{__${contentFragment}__ :: content}"></main>
            <!-- END Main Container -->

            <!-- Footer -->
            <footer th:replace="admin/layouts/footer.html :: footer"></footer>
            <!-- END Footer -->

            <!-- Apps Modal -->
            <!-- Opens from the modal toggle button in the header -->
            <div th:replace="admin/components/modal_in_header.html :: modal_in_header"></div>

            <!-- Modal tables -->
            <!-- Modal Add -->
            <div th:replace="~{__${modalCreate}__ :: modal_create }"></div>
            <!-- Modal Edit -->
            <div th:replace="~{__${modalEdit}__ :: modal_edit }"></div>
            <!-- Modal Delete -->
            <div th:replace="~{__${modalDelete}__ :: modal_delete }"></div>
            <!-- End Modal tables -->
            <!-- END Apps Modal -->
        </div>
        <!-- END Page Container -->

        <script src="/content/admin/assets/js/oneui.core.min.js"></script>

        <script src="/content/admin/assets/js/oneui.app.min.js"></script>

        <!-- Page JS Plugins -->
        <script src="/content/admin/assets/js/plugins/datatables/jquery.dataTables.min.js"></script>
        <script src="/content/admin/assets/js/plugins/datatables/dataTables.bootstrap4.min.js"></script>
        <script src="/content/admin/assets/js/plugins/datatables/buttons/dataTables.buttons.min.js"></script>
        <script src="/content/admin/assets/js/plugins/datatables/buttons/buttons.print.min.js"></script>
        <script src="/content/admin/assets/js/plugins/datatables/buttons/buttons.html5.min.js"></script>
        <script src="/content/admin/assets/js/plugins/datatables/buttons/buttons.flash.min.js"></script>
        <script src="/content/admin/assets/js/plugins/datatables/buttons/buttons.colVis.min.js"></script>
        <script src="/content/admin/assets/js/pages/be_tables_datatables.min.js"></script>

        <div th:replace="~{__${contentFragment}__ :: script_after}"></div>
        
        <script>
            $(() => {
                $(function () {
                    $('#addButton').click(function () {
                        $('#addModal').modal('show');
                    });
                    $('#addButtonBook').click(function () {
                        $('#addModalBook').modal('show');
                    });
                });
            })

            function editModal(id) {
                $('#editModal').attr('data-id', id);
                $('#editModal').modal('show');
                napThongTinCapNhat(id);
            }

            function deleteModal(id) {
                $('#deleteModal form').attr('data-id', id);
                $('#deleteModal').modal('show');
            }

            const user = getUserInfo()
            document.querySelectorAll('.need-fullname').forEach(e => {
                e.innerText = user.full_name
            })
            document.querySelectorAll('.need-rolename').forEach(e => {
                e.innerText = user.role.map(i => i.displayName).join(" / ")
            })
            document.querySelectorAll('.need-avatar').forEach(e => {
                if (user.avatar == null)
                    e.src = "/content/admin/assets/media/avatars/avatar0.jpg"
                else
                    e.src = "/user/download/" + user.avatar
            })
        </script>
    </body>

</html>